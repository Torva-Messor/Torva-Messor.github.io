<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torva Presenter</title>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.7.6.3.min.js"></script>
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background: #111; 
            color: #fff; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px; 
            margin: 0;
        }
        h1 { color: #00f2ff; font-size: 1.5rem; margin-bottom: 30px; }
        .button-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
            width: 100%; 
            max-width: 400px;
        }
        button { 
            background: #222; 
            border: 1px solid #444; 
            color: white; 
            padding: 20px; 
            border-radius: 10px; 
            font-size: 1rem; 
            cursor: pointer; 
            transition: all 0.2s; 
        }
        button:active { transform: scale(0.95); }
        .btn-action { border-color: #00f2ff; color: #00f2ff; }
        .btn-video { border-color: #fff; }
        .btn-damage { border-color: #ff0055; color: #ff0055; }
        .btn-heal { border-color: #00ff88; color: #00ff88; }
        .full-width { grid-column: span 2; }
    </style>
</head>
<body>

    <h1>TORVA CONTROLLER</h1>

    <div class="button-grid">
        <button class="btn-action" onclick="sendCommand(0, 'morph_go')">GO Brett</button>
        <button class="btn-action" onclick="sendCommand(0, 'morph_qr')">QR Code</button>
        
        <button class="btn-damage" onclick="sendCommand(null, 'damage')">Damage</button>
        <button class="btn-heal" onclick="sendCommand(null, 'heal')">Heal</button>

        <button class="btn-video full-width" onclick="sendCommand(2, 'play_video')">ðŸŽ¥ Play Video</button>
        <button class="btn-video full-width" onclick="sendCommand(3, null)">ðŸ¤– AR Object</button>
    </div>

    <script>
        // --- KONFIGURATION ---
        // HIER MÃœSSEN DIE GLEICHEN KEYS WIE IM VIEWER REIN
        const publishKey = 'DEIN_PUBLISH_KEY'; 
        const subscribeKey = 'DEIN_SUBSCRIBE_KEY';
        const channelName = 'torva_channel';

        // PubNub Initialisierung
        const pubnub = new PubNub({
            publishKey: publishKey,
            subscribeKey: subscribeKey,
            userId: "presenter_mobile"
        });

        // Funktion zum Senden von Befehlen
        function sendCommand(slideIndex, actionName) {
            const payload = {};
            
            // Nur slide senden, wenn angegeben
            if (slideIndex !== null) {
                payload.slide = slideIndex;
            }
            
            // Nur action senden, wenn angegeben
            if (actionName !== null) {
                payload.action = actionName;
            }
            
            pubnub.publish({
                channel: channelName,
                message: payload
            });
            console.log("Gesendet:", payload);
        }
    </script>
</body>
</html>
